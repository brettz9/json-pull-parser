{"version":3,"file":"json-pull-parser.js","sources":["../src/builder.js","../src/parser.js"],"sourcesContent":["/**\n *\n */\nclass ObjectBuilder {\n  /**\n   *\n   */\n  constructor () {\n    this.handler = {\n      ref: this,\n      add (value) { this.ref.value = value; return value; }\n    };\n  }\n\n  /**\n   * @returns {void}\n   */\n  startObject () {\n    this.handler = {\n      old: this.handler,\n      key: null,\n      ref: this.handler.add({}),\n      add (value) {\n        if (this.key === null) this.key = value;\n        else { this.ref[this.key] = value; this.key = null; }\n        return value;\n      }\n    };\n  }\n\n  /**\n   * @returns {void}\n   */\n  endObject () {\n    this.handler = this.handler.old;\n  }\n\n  /**\n   * @returns {void}\n   */\n  startArray () {\n    this.handler = {\n      old: this.handler,\n      ref: this.handler.add([]),\n      add (value) {\n        this.ref.push(value);\n        return value;\n      }\n    };\n  }\n\n  /**\n   * @param {JSONValueOrError} value\n   * @returns {void}\n   */\n  add (value) {\n    this.handler.add(value);\n  }\n\n  /**\n   * @param {Token|TokenEnd} token\n   * @returns {void}\n   */\n  handle (token) {\n    switch (token.type) {\n    case '{':\n      this.startObject();\n      break;\n    case '}':\n      this.endObject();\n      break;\n    case '[':\n      this.startArray();\n      break;\n    case ']':\n      this.endArray();\n      break;\n    case 'string':\n    case 'number':\n    case 'true':\n    case 'false':\n    case 'null':\n      this.add(token.value);\n      break;\n    case 'error':\n      throw new SyntaxError(token.value.message);\n    default:\n      throw new TypeError('Unexpected token type');\n    }\n  }\n}\n\nObjectBuilder.prototype.endArray = ObjectBuilder.prototype.endObject;\n\nexport default ObjectBuilder;\n","import ObjectBuilder from './builder.js';\n\n/**\n * @typedef {PlainObject} State\n * @property {string} s Text\n * @property {boolean} [d=false] Done\n * @property {Integer} [f=0] Position\n * @property {Integer} [l] Defaults to text length\n * @property {Integer} [e=VALUE] Expect\n * @property {Integer} [c=0] Column\n * @property {Integer} [r=1] Row\n * @property {Integer[]} [x=[]]\n*/\n\n/**\n* @typedef {string} Type\n*/\n\n/**\n * @typedef {PlainObject} TokenPlain\n * @property {Type} type\n * @property {Integer} first\n * @property {Integer} last\n*/\n\n/**\n * @typedef {TokenPlain} TokenEnd\n */\n\n/**\n * @typedef {SyntaxError|string|Float|boolean|null} JSONValueOrError\n */\n\n/**\n * @typedef {TokenPlain} Token\n * @property {JSONValueOrError} value\n */\n\n/**\n * @typedef {Token} TokenWithSource\n * @property {string} source\n */\n\nconst VALUE = 1;\nconst KEY = 2;\nconst COMMA = 4;\nconst COLON = 8;\nconst CLOSE = 16;\nconst OBJECT = 32;\nconst ARRAY = 64;\n\n/**\n *\n */\nclass JSONPullParser {\n  /**\n   * @param {string} text\n   * @returns {void}\n   */\n  constructor (text) {\n    this.text = text;\n  }\n\n  /**\n   * @returns {Iterator}\n   */\n  [Symbol.iterator] () {\n    return tokenIterator(this.text);\n  }\n\n  /**\n   * @returns {Iterator}\n   */\n  tokens () {\n    return tokenIterator(this.text);\n  }\n}\n\n/*\nif (typeof Symbol === 'object' && Symbol.iterator) {\n  JSONPullParser.prototype[Symbol.iterator] = JSONPullParser.prototype.tokens;\n}\n*/\n\nJSONPullParser.StartDocument = '<';\nJSONPullParser.EndDocument = '>';\nJSONPullParser.StartObject = '{';\nJSONPullParser.EndObject = '}';\nJSONPullParser.StartArray = '[';\nJSONPullParser.EndArray = ']';\nJSONPullParser.String = 'string';\nJSONPullParser.Number = 'number';\nJSONPullParser.TrueLiteral = 'true';\nJSONPullParser.FalseLiteral = 'false';\nJSONPullParser.NullLiteral = 'null';\nJSONPullParser.Whitespace = 'ws';\nJSONPullParser.Error = 'error';\n\nJSONPullParser.ObjectBuilder = ObjectBuilder;\n\n/**\n* @callback ReviverFunction\n* @returns {JSON}\n*/\n\n/**\n* @param {string} text\n* @param {ReviverFunction} reviver\n*/\nJSONPullParser.parse = function (text, reviver) {\n  if (typeof text !== 'string') text = String(text);\n  const builder = new ObjectBuilder();\n  const it = tokenIterator(text);\n  for (let step = it.next(); !step.done; step = it.next()) {\n    const token = step.value;\n    // console.log(\"token: \" + token.type);\n    builder.handle(token);\n  }\n  if (typeof builder.value === 'undefined') {\n    throw new SyntaxError('Unexpected end of JSON input');\n  }\n  return builder.value;\n};\n\n/**\n * @param {string} text\n * @returns {void}\n */\nfunction * tokenIterator (text) {\n  const state = {\n    s: text,\n    d: false, // done\n    f: 0, // position\n    l: text.length, // length\n    e: VALUE, // expect\n    c: 0, // column\n    r: 1, // row\n    x: []\n  };\n\n  while (true) {\n    // console.log(\n    //  `next: ${state.f}, ${state.l}, ` +\n    //   `${text.charCodeAt(state.f).toString(16)}`\n    // );\n    if (state.f === state.l) {\n      if (!state.e && !state.x.length) {\n        return;\n      }\n      yield parserError(\n        state.s, state.l, state.l, 'Unexpected end of JSON input'\n      );\n    }\n    const token = parseValue(state);\n    state.f = token.last;\n\n    yield token;\n  }\n}\n\n/**\n * @param {string} s\n * @param {Integer} f\n * @param {Integer} l\n * @param {string} m Message\n * @param {Integer} r\n * @returns {Token}\n */\nfunction parserError (s, f, l, m, r = 1) {\n  let c = f;\n  let cc = s.charCodeAt(c);\n  while (cc !== 0x0A && c > 0) {\n    cc = s.charCodeAt(--c);\n  }\n  if (cc === 0x0A) ++c;\n  const str0 = 'undefined:' + r;\n  const str1 = s.slice(c, f + 1);\n  let str2 = '';\n  for (let i = c; i < f; ++i) str2 += ' ';\n  str2 += '^';\n\n  const err = new SyntaxError(str0 + '\\n' + str1 + '\\n' + str2 + '\\n\\n' + m);\n  return {\n    type: JSONPullParser.Error,\n    value: err,\n    first: f,\n    last: l\n  };\n}\n\n/**\n * @param {string} s\n * @param {Integer} f\n * @param {Integer} l\n * @returns {Token}\n */\nfunction parseObjectStart (s, f, l) {\n  return {\n    type: JSONPullParser.StartObject,\n    value: '{',\n    first: f,\n    last: f + 1\n  };\n}\n\n/**\n * @param {string} s\n * @param {Integer} f\n * @param {Integer} l\n * @returns {Token}\n */\nfunction parseObjectEnd (s, f, l) {\n  return {\n    type: JSONPullParser.EndObject,\n    value: '}',\n    first: f,\n    last: f + 1\n  };\n}\n/**\n * @param {string} s\n * @param {Integer} f\n * @param {Integer} l\n * @returns {Token}\n */\nfunction parseArrayStart (s, f, l) {\n  return {\n    type: JSONPullParser.StartArray,\n    value: '[',\n    first: f,\n    last: f + 1\n  };\n}\n\n/**\n * @param {string} s\n * @param {Integer} f\n * @param {Integer} l\n * @returns {Token}\n */\nfunction parseArrayEnd (s, f, l) {\n  return {\n    type: JSONPullParser.EndArray,\n    value: ']',\n    first: f,\n    last: f + 1\n  };\n}\n\n/**\n * @param {State} state\n * @returns {Token|TokenEnd}\n */\nfunction parseValue (state) {\n  const {s, l} = state;\n  let {f} = state;\n  while (f < l) {\n    state.c++;\n    switch (s.charCodeAt(f)) {\n    case 0x0A: // LF\n      state.c = 0;\n      state.r++;\n      // Fallthrough\n    case 0x09: // TAB\n    case 0x0D: // CR\n    case 0x20: // WS\n      ++f; continue;\n    case 0x7B: // {\n      if (!(state.e & VALUE)) {\n        return parserError(\n          s, f, l, 'Unexpected token { in JSON at position ' + f, state.r\n        );\n      }\n      state.e = KEY | CLOSE;\n      state.x.push(OBJECT);\n      return parseObjectStart(s, f, l);\n    case 0x7D: // }\n      if (!(state.e & CLOSE) || state.x.pop() !== OBJECT) {\n        return parserError(\n          s, f, l, 'Unexpected token } in JSON at position ' + f, state.r\n        );\n      }\n      state.e = state.x.length > 0 ? COMMA | CLOSE : 0;\n      return parseObjectEnd(s, f, l);\n    case 0x5B: // [\n      if (!(state.e & VALUE)) {\n        return parserError(\n          s, f, l, 'Unexpected token [ in JSON at position ' + f, state.r\n        );\n      }\n      state.e = VALUE | CLOSE;\n      state.x.push(ARRAY);\n      return parseArrayStart(s, f, l);\n    case 0x5D: // ]\n      if (!(state.e & CLOSE) || state.x.pop() !== ARRAY) {\n        return parserError(\n          s, f, l, 'Unexpected token ] in JSON at position ' + f, state.r\n        );\n      }\n      state.e = state.x.length > 0 ? COMMA | CLOSE : 0;\n      return parseArrayEnd(s, f, l);\n    case 0x3A: // :\n      if (!(state.e & COLON)) {\n        return parserError(\n          s, f, l, 'Unexpected token : in JSON at position ' + f, state.r\n        );\n      }\n      state.e = VALUE;\n      ++f; continue;\n    case 0x2C: // ,\n      if (!(state.e & COMMA)) {\n        return parserError(\n          s, f, l, 'Unexpected token , in JSON at position ' + f, state.r\n        );\n      }\n      if (state.x.length > 0 && state.x[state.x.length - 1] === OBJECT) {\n        state.e = KEY;\n      } else {\n        state.e = VALUE;\n      }\n      ++f; continue;\n    case 0x2D: // -\n    case 0x30: // 0\n    case 0x31: // 1\n    case 0x32: // 2\n    case 0x33: // 3\n    case 0x34: // 4\n    case 0x35: // 5\n    case 0x36: // 6\n    case 0x37: // 7\n    case 0x38: // 8\n    case 0x39: // 9\n      if (!(state.e & VALUE)) {\n        return parserError(\n          s, f, l, 'Unexpected number in JSON at position ' + f, state.r\n        );\n      }\n      state.e = state.x.length > 0 ? COMMA | CLOSE : 0;\n      return parseNumber(s, f, l);\n    case 0x22:\n      if (state.e & KEY) {\n        state.e = COLON;\n        return parseString(s, f, l);\n      }\n      if (!(state.e & VALUE)) {\n        return parserError(\n          s, f, l, 'Unexpected string in JSON at position ' + f, state.r\n        );\n      }\n      state.e = state.x.length > 0 ? COMMA | CLOSE : 0;\n      return parseString(s, f, l);\n    case 0x74: // t\n      if (!(state.e & VALUE)) {\n        return parserError(\n          s, f, l, 'Unexpected token t in JSON at position ' + f, state.r\n        );\n      }\n      state.e = state.x.length > 0 ? COMMA | CLOSE : 0;\n      return parseTrue(s, f, l);\n    case 0x66: // f\n      if (!(state.e & VALUE)) {\n        return parserError(\n          s, f, l, 'Unexpected token f in JSON at position ' + f, state.r\n        );\n      }\n      state.e = state.x.length > 0 ? COMMA | CLOSE : 0;\n      return parseFalse(s, f, l);\n    case 0x6E: // n\n      if (!(state.e & VALUE)) {\n        return parserError(\n          s, f, l, 'Unexpected token n in JSON at position ' + f, state.r\n        );\n      }\n      state.e = state.x.length > 0 ? COMMA | CLOSE : 0;\n      return parseNull(s, f, l);\n    default: return parserError(\n      s, f, l, 'Unexpected token ' + s[f] + ' in JSON at position ' + f, state.r\n    );\n    }\n  }\n  return {\n    type: JSONPullParser.EndDocument,\n    first: l,\n    last: l\n  };\n}\n\n/**\n * @param {string} s\n * @param {Integer} f\n * @param {Integer} l\n * @returns {Token}\n */\nfunction parseNumber (s, f, l) {\n  let c = f;\n\n  let cc = s.charCodeAt(c++);\n\n  if (cc === 0x2D /* - */) cc = s.charCodeAt(c++);\n\n  if (cc !== 0x30 /* 0 */) {\n    while (cc >= 0x30 /* 0 */ && cc <= 0x39 /* 9 */) {\n      cc = s.charCodeAt(c++);\n    }\n  } else {\n    cc = s.charCodeAt(c++);\n  }\n\n  if (cc === 0x2E /* . */) {\n    cc = s.charCodeAt(c++);\n    while (cc >= 0x30 && cc <= 0x39) cc = s.charCodeAt(c++);\n  }\n\n  if (cc === 0x65 /* e */|| cc === 0x45 /* E */) {\n    cc = s.charCodeAt(c++);\n    if (cc === 0x2B /* + */|| cc === 0x2D /* - */) cc = s.charCodeAt(c++);\n    if (cc < 0x30 || cc > 0x39) {\n      return parserError(\n        s, c - 1, l,\n        'Unexpected token ' + s[c - 1] + ' in JSON at position ' + (c - 1)\n      );\n    }\n    if (c >= l) return parserError(s, f, l, 'Unexpected end of JSON input');\n    while (cc >= 0x30 /* 0 */ && cc <= 0x39 /* 9 */) cc = s.charCodeAt(c++);\n  }\n\n  return {\n    type: JSONPullParser.Number,\n    value: Number.parseFloat(\n      s.slice(f, c - 1)\n    ), // parseFloat seems to be faster than JSON.parse\n    first: f,\n    last: c - 1\n  };\n}\n\n// ECMA-404 section 9\n/**\n * @param {string} s\n * @param {Integer} f\n * @param {Integer} l\n * @returns {TokenWithSource}\n */\nfunction parseString (s, f, l) {\n  let c = f + 1;\n  while (c < l) {\n    let cc = s.charCodeAt(c++);\n    if (cc === 0x22 /* \" */) break;\n    else if (cc === 0x5C /* \\ */) {\n      cc = s.charCodeAt(c++);\n      if (cc === 0x75 /* u */) {\n        c += 4;\n        if (c > l) return parserError(s, l, l, 'Unexpected end of JSON input');\n      }\n    }\n  }\n  // console.log(`string: ${c}, ${f}, ${s.substring(f, c)}`);\n  return {\n    type: JSONPullParser.String,\n    value: JSON.parse(s.slice(f, c)),\n    source: s,\n    first: f,\n    last: c\n  };\n}\n\n/**\n * @param {string} s\n * @param {Integer} f\n * @param {Integer} l\n * @param {Integer[]} ccs\n * @param {TokenWithSource} success\n * @returns {token}\n */\nfunction match (s, f, l, ccs, success) {\n  if (f + ccs.length > l) {\n    return parserError(s, l, l, 'Unexpected end of JSON input');\n  }\n  for (const cc_ of ccs) {\n    const cc = s.charCodeAt(f++);\n    if (cc !== cc_) {\n      return parserError(\n        s, f, l,\n        'Unexpected token ' + s[f - 1] + ' in JSON at position ' + (f - 1)\n      );\n    }\n  }\n  return success;\n}\n\n/**\n * @param {string} s\n * @param {Integer} f\n * @param {Integer} l\n * @returns {TokenWithSource}\n */\nfunction parseTrue (s, f, l) {\n  return match(s, f, l, [0x74, 0x72, 0x75, 0x65], {\n    type: JSONPullParser.TrueLiteral,\n    value: true,\n    source: s,\n    first: f,\n    last: f + 4\n  });\n}\n\n/**\n * @param {string} s\n * @param {Integer} f\n * @param {Integer} l\n * @returns {TokenWithSource}\n */\nfunction parseFalse (s, f, l) {\n  return match(s, f, l, [0x66, 0x61, 0x6C, 0x73, 0x65], {\n    type: JSONPullParser.FalseLiteral,\n    value: false,\n    source: s,\n    first: f,\n    last: f + 5\n  });\n}\n\n/**\n * @param {string} s\n * @param {Integer} f\n * @param {Integer} l\n * @returns {TokenWithSource}\n */\nfunction parseNull (s, f, l) {\n  return match(s, f, l, [0x6E, 0x75, 0x6C, 0x6C], {\n    type: JSONPullParser.NullLiteral,\n    value: null,\n    source: s,\n    first: f,\n    last: f + 4\n  });\n}\n\nexport default JSONPullParser;\n"],"names":["ObjectBuilder","[object Object]","this","handler","ref","value","old","key","add","push","token","type","startObject","endObject","startArray","endArray","SyntaxError","message","TypeError","prototype","CLOSE","JSONPullParser","text","Symbol","iterator","tokenIterator","state","s","d","f","l","length","e","c","r","x","parserError","parseValue","last","m","cc","charCodeAt","str0","str1","slice","str2","i","err","Error","first","parseObjectStart","StartObject","parseObjectEnd","EndObject","parseArrayStart","StartArray","parseArrayEnd","EndArray","KEY","pop","COMMA","VALUE","parseNumber","parseString","parseTrue","parseFalse","parseNull","EndDocument","Number","parseFloat","String","JSON","parse","source","match","ccs","success","cc_","TrueLiteral","FalseLiteral","NullLiteral","StartDocument","Whitespace","reviver","builder","it","step","next","done","handle"],"mappings":"+OAGA,MAAMA,EAIJC,cACEC,KAAKC,QAAU,CACbC,IAAKF,KACLD,IAAKI,GAAiC,OAAxBH,KAAKE,IAAIC,MAAQA,EAAcA,IAOjDJ,cACEC,KAAKC,QAAU,CACbG,IAAKJ,KAAKC,QACVI,IAAK,KACLH,IAAKF,KAAKC,QAAQK,IAAI,IACtBP,IAAKI,GAGH,OAFiB,OAAbH,KAAKK,IAAcL,KAAKK,IAAMF,GAC3BH,KAAKE,IAAIF,KAAKK,KAAOF,EAAOH,KAAKK,IAAM,MACvCF,IAQbJ,YACEC,KAAKC,QAAUD,KAAKC,QAAQG,IAM9BL,aACEC,KAAKC,QAAU,CACbG,IAAKJ,KAAKC,QACVC,IAAKF,KAAKC,QAAQK,IAAI,IACtBP,IAAKI,GAEH,OADAH,KAAKE,IAAIK,KAAKJ,GACPA,IASbJ,IAAKI,GACHH,KAAKC,QAAQK,IAAIH,GAOnBJ,OAAQS,GACN,OAAQA,EAAMC,MACd,IAAK,IACHT,KAAKU,cACL,MACF,IAAK,IACHV,KAAKW,YACL,MACF,IAAK,IACHX,KAAKY,aACL,MACF,IAAK,IACHZ,KAAKa,WACL,MACF,IAAK,SACL,IAAK,SACL,IAAK,OACL,IAAK,QACL,IAAK,OACHb,KAAKM,IAAIE,EAAML,OACf,MACF,IAAK,QACH,MAAM,IAAIW,YAAYN,EAAML,MAAMY,SACpC,QACE,MAAM,IAAIC,UAAU,2BAK1BlB,EAAcmB,UAAUJ,SAAWf,EAAcmB,UAAUN,UCjD3D,MAIMO,EAAQ,GAOd,MAAMC,EAKJpB,YAAaqB,GACXpB,KAAKoB,KAAOA,EAMdrB,CAACsB,OAAOC,YACN,OAAOC,EAAcvB,KAAKoB,MAM5BrB,SACE,OAAOwB,EAAcvB,KAAKoB,OAsD9B,SAAWG,EAAeH,GACxB,MAAMI,EAAQ,CACZC,EAAGL,EACHM,GAAG,EACHC,EAAG,EACHC,EAAGR,EAAKS,OACRC,EA3FU,EA4FVC,EAAG,EACHC,EAAG,EACHC,EAAG,IAGL,OAAa,CAKX,GAAIT,EAAMG,IAAMH,EAAMI,EAAG,CACvB,IAAKJ,EAAMM,IAAMN,EAAMS,EAAEJ,OACvB,aAEIK,EACJV,EAAMC,EAAGD,EAAMI,EAAGJ,EAAMI,EAAG,gCAG/B,MAAMpB,EAAQ2B,EAAWX,GACzBA,EAAMG,EAAInB,EAAM4B,WAEV5B,GAYV,SAAS0B,EAAaT,EAAGE,EAAGC,EAAGS,EAAGL,EAAI,GACpC,IAAID,EAAIJ,EACJW,EAAKb,EAAEc,WAAWR,GACtB,KAAc,KAAPO,GAAeP,EAAI,GACxBO,EAAKb,EAAEc,aAAaR,GAEX,KAAPO,KAAeP,EACnB,MAAMS,EAAO,aAAeR,EACtBS,EAAOhB,EAAEiB,MAAMX,EAAGJ,EAAI,GAC5B,IAAIgB,EAAO,GACX,IAAK,IAAIC,EAAIb,EAAGa,EAAIjB,IAAKiB,EAAGD,GAAQ,IACpCA,GAAQ,IAER,MAAME,EAAM,IAAI/B,YAAY0B,EAAO,KAAOC,EAAO,KAAOE,EAAO,OAASN,GACxE,MAAO,CACL5B,KAAMU,EAAe2B,MACrB3C,MAAO0C,EACPE,MAAOpB,EACPS,KAAMR,GAUV,SAASoB,EAAkBvB,EAAGE,EAAGC,GAC/B,MAAO,CACLnB,KAAMU,EAAe8B,YACrB9C,MAAO,IACP4C,MAAOpB,EACPS,KAAMT,EAAI,GAUd,SAASuB,EAAgBzB,EAAGE,EAAGC,GAC7B,MAAO,CACLnB,KAAMU,EAAegC,UACrBhD,MAAO,IACP4C,MAAOpB,EACPS,KAAMT,EAAI,GASd,SAASyB,EAAiB3B,EAAGE,EAAGC,GAC9B,MAAO,CACLnB,KAAMU,EAAekC,WACrBlD,MAAO,IACP4C,MAAOpB,EACPS,KAAMT,EAAI,GAUd,SAAS2B,EAAe7B,EAAGE,EAAGC,GAC5B,MAAO,CACLnB,KAAMU,EAAeoC,SACrBpD,MAAO,IACP4C,MAAOpB,EACPS,KAAMT,EAAI,GAQd,SAASQ,EAAYX,GACnB,MAAMC,EAACA,EAACG,EAAEA,GAAKJ,EACf,IAAIG,EAACA,GAAKH,EACV,KAAOG,EAAIC,GAET,OADAJ,EAAMO,IACEN,EAAEc,WAAWZ,IACrB,KAAK,GACHH,EAAMO,EAAI,EACVP,EAAMQ,IAER,KAAK,EACL,KAAK,GACL,KAAK,KACDL,EAAG,SACP,KAAK,IACH,OAjOQ,EAiOFH,EAAMM,GAKZN,EAAMM,EAAI0B,GACVhC,EAAMS,EAAE1B,KAlOC,IAmOFyC,EAAiBvB,EAAGE,IANlBO,EACLT,EAAGE,EAAGC,EAAG,0CAA4CD,EAAGH,EAAMQ,GAMpE,KAAK,IACH,OAAMR,EAAMM,EAAIZ,GArOP,KAqOiBM,EAAMS,EAAEwB,OAKlCjC,EAAMM,EAAIN,EAAMS,EAAEJ,OAAS,EAAI6B,GAAgB,EACxCR,EAAezB,EAAGE,IALhBO,EACLT,EAAGE,EAAGC,EAAG,0CAA4CD,EAAGH,EAAMQ,GAKpE,KAAK,GACH,OAlPQ,EAkPFR,EAAMM,GAKZN,EAAMM,EAAI6B,GACVnC,EAAMS,EAAE1B,KAlPA,IAmPD6C,EAAgB3B,EAAGE,IANjBO,EACLT,EAAGE,EAAGC,EAAG,0CAA4CD,EAAGH,EAAMQ,GAMpE,KAAK,GACH,OAAMR,EAAMM,EAAIZ,GArPR,KAqPkBM,EAAMS,EAAEwB,OAKlCjC,EAAMM,EAAIN,EAAMS,EAAEJ,OAAS,EAAI6B,GAAgB,EACxCJ,EAAc7B,EAAGE,IALfO,EACLT,EAAGE,EAAGC,EAAG,0CAA4CD,EAAGH,EAAMQ,GAKpE,KAAK,GACH,KAhQQ,EAgQFR,EAAMM,GACV,OAAOI,EACLT,EAAGE,EAAGC,EAAG,0CAA4CD,EAAGH,EAAMQ,GAGlER,EAAMM,EAxQE,IAyQNH,EAAG,SACP,KAAK,GACH,KAzQQ,EAyQFH,EAAMM,GACV,OAAOI,EACLT,EAAGE,EAAGC,EAAG,0CAA4CD,EAAGH,EAAMQ,GAG9DR,EAAMS,EAAEJ,OAAS,GA3QZ,KA2QiBL,EAAMS,EAAET,EAAMS,EAAEJ,OAAS,GACjDL,EAAMM,EAhRF,EAkRJN,EAAMM,EAnRA,IAqRNH,EAAG,SACP,KAAK,GACL,KAAK,GACL,KAAK,GACL,KAAK,GACL,KAAK,GACL,KAAK,GACL,KAAK,GACL,KAAK,GACL,KAAK,GACL,KAAK,GACL,KAAK,GACH,OAjSQ,EAiSFH,EAAMM,GAKZN,EAAMM,EAAIN,EAAMS,EAAEJ,OAAS,EAAI6B,GAAgB,EACxCE,EAAYnC,EAAGE,EAAGC,IALhBM,EACLT,EAAGE,EAAGC,EAAG,yCAA2CD,EAAGH,EAAMQ,GAKnE,KAAK,GACH,OAxSM,EAwSFR,EAAMM,GACRN,EAAMM,EAvSA,EAwSC+B,EAAYpC,EAAGE,EAAGC,IA3SnB,EA6SFJ,EAAMM,GAKZN,EAAMM,EAAIN,EAAMS,EAAEJ,OAAS,EAAI6B,GAAgB,EACxCG,EAAYpC,EAAGE,EAAGC,IALhBM,EACLT,EAAGE,EAAGC,EAAG,yCAA2CD,EAAGH,EAAMQ,GAKnE,KAAK,IACH,OArTQ,EAqTFR,EAAMM,GAKZN,EAAMM,EAAIN,EAAMS,EAAEJ,OAAS,EAAI6B,GAAgB,EACxCI,EAAUrC,EAAGE,EAAGC,IALdM,EACLT,EAAGE,EAAGC,EAAG,0CAA4CD,EAAGH,EAAMQ,GAKpE,KAAK,IACH,OA7TQ,EA6TFR,EAAMM,GAKZN,EAAMM,EAAIN,EAAMS,EAAEJ,OAAS,EAAI6B,GAAgB,EACxCK,EAAWtC,EAAGE,EAAGC,IALfM,EACLT,EAAGE,EAAGC,EAAG,0CAA4CD,EAAGH,EAAMQ,GAKpE,KAAK,IACH,OArUQ,EAqUFR,EAAMM,GAKZN,EAAMM,EAAIN,EAAMS,EAAEJ,OAAS,EAAI6B,GAAgB,EACxCM,EAAUvC,EAAGE,EAAGC,IALdM,EACLT,EAAGE,EAAGC,EAAG,0CAA4CD,EAAGH,EAAMQ,GAKpE,QAAS,OAAOE,EACdT,EAAGE,EAAGC,EAAG,oBAAsBH,EAAEE,GAAK,wBAA0BA,EAAGH,EAAMQ,GAI7E,MAAO,CACLvB,KAAMU,EAAe8C,YACrBlB,MAAOnB,EACPQ,KAAMR,GAUV,SAASgC,EAAanC,EAAGE,EAAGC,GAC1B,IAAIG,EAAIJ,EAEJW,EAAKb,EAAEc,WAAWR,KAItB,GAFW,KAAPO,IAAqBA,EAAKb,EAAEc,WAAWR,MAEhC,KAAPO,EACF,KAAOA,GAAM,IAAgBA,GAAM,IACjCA,EAAKb,EAAEc,WAAWR,UAGpBO,EAAKb,EAAEc,WAAWR,KAGpB,GAAW,KAAPO,EAEF,IADAA,EAAKb,EAAEc,WAAWR,KACXO,GAAM,IAAQA,GAAM,IAAMA,EAAKb,EAAEc,WAAWR,KAGrD,GAAW,MAAPO,GAA6B,KAAPA,EAAqB,CAG7C,GAFAA,EAAKb,EAAEc,WAAWR,KACP,KAAPO,GAA6B,KAAPA,IAAqBA,EAAKb,EAAEc,WAAWR,MAC7DO,EAAK,IAAQA,EAAK,GACpB,OAAOJ,EACLT,EAAGM,EAAI,EAAGH,EACV,oBAAsBH,EAAEM,EAAI,GAAK,yBAA2BA,EAAI,IAGpE,GAAIA,GAAKH,EAAG,OAAOM,EAAYT,EAAGE,EAAGC,EAAG,gCACxC,KAAOU,GAAM,IAAgBA,GAAM,IAAcA,EAAKb,EAAEc,WAAWR,KAGrE,MAAO,CACLtB,KAAMU,EAAe+C,OACrB/D,MAAO+D,OAAOC,WACZ1C,EAAEiB,MAAMf,EAAGI,EAAI,IAEjBgB,MAAOpB,EACPS,KAAML,EAAI,GAWd,SAAS8B,EAAapC,EAAGE,EAAGC,GAC1B,IAAIG,EAAIJ,EAAI,EACZ,KAAOI,EAAIH,GAAG,CACZ,IAAIU,EAAKb,EAAEc,WAAWR,KACtB,GAAW,KAAPO,EAAqB,MACpB,GAAW,KAAPA,IACPA,EAAKb,EAAEc,WAAWR,KACP,MAAPO,IACFP,GAAK,EACDA,EAAIH,IAAG,OAAOM,EAAYT,EAAGG,EAAGA,EAAG,gCAK7C,MAAO,CACLnB,KAAMU,EAAeiD,OACrBjE,MAAOkE,KAAKC,MAAM7C,EAAEiB,MAAMf,EAAGI,IAC7BwC,OAAQ9C,EACRsB,MAAOpB,EACPS,KAAML,GAYV,SAASyC,EAAO/C,EAAGE,EAAGC,EAAG6C,EAAKC,GAC5B,GAAI/C,EAAI8C,EAAI5C,OAASD,EACnB,OAAOM,EAAYT,EAAGG,EAAGA,EAAG,gCAE9B,IAAK,MAAM+C,KAAOF,EAAK,CAErB,GADWhD,EAAEc,WAAWZ,OACbgD,EACT,OAAOzC,EACLT,EAAGE,EAAGC,EACN,oBAAsBH,EAAEE,EAAI,GAAK,yBAA2BA,EAAI,IAItE,OAAO+C,EAST,SAASZ,EAAWrC,EAAGE,EAAGC,GACxB,OAAO4C,EAAM/C,EAAGE,EAAGC,EAAG,CAAC,IAAM,IAAM,IAAM,KAAO,CAC9CnB,KAAMU,EAAeyD,YACrBzE,OAAO,EACPoE,OAAQ9C,EACRsB,MAAOpB,EACPS,KAAMT,EAAI,IAUd,SAASoC,EAAYtC,EAAGE,EAAGC,GACzB,OAAO4C,EAAM/C,EAAGE,EAAGC,EAAG,CAAC,IAAM,GAAM,IAAM,IAAM,KAAO,CACpDnB,KAAMU,EAAe0D,aACrB1E,OAAO,EACPoE,OAAQ9C,EACRsB,MAAOpB,EACPS,KAAMT,EAAI,IAUd,SAASqC,EAAWvC,EAAGE,EAAGC,GACxB,OAAO4C,EAAM/C,EAAGE,EAAGC,EAAG,CAAC,IAAM,IAAM,IAAM,KAAO,CAC9CnB,KAAMU,EAAe2D,YACrB3E,MAAO,KACPoE,OAAQ9C,EACRsB,MAAOpB,EACPS,KAAMT,EAAI,WAlcdR,EAAe4D,cAAgB,IAC/B5D,EAAe8C,YAAc,IAC7B9C,EAAe8B,YAAc,IAC7B9B,EAAegC,UAAY,IAC3BhC,EAAekC,WAAa,IAC5BlC,EAAeoC,SAAW,IAC1BpC,EAAeiD,OAAS,SACxBjD,EAAe+C,OAAS,SACxB/C,EAAeyD,YAAc,OAC7BzD,EAAe0D,aAAe,QAC9B1D,EAAe2D,YAAc,OAC7B3D,EAAe6D,WAAa,KAC5B7D,EAAe2B,MAAQ,QAEvB3B,EAAerB,cAAgBA,EAW/BqB,EAAemD,MAAQ,SAAUlD,EAAM6D,GACjB,iBAAT7D,IAAmBA,EAAOgD,OAAOhD,IAC5C,MAAM8D,EAAU,IAAIpF,EACdqF,EAAK5D,EAAcH,GACzB,IAAK,IAAIgE,EAAOD,EAAGE,QAASD,EAAKE,KAAMF,EAAOD,EAAGE,OAAQ,CACvD,MAAM7E,EAAQ4E,EAAKjF,MAEnB+E,EAAQK,OAAO/E,GAEjB,QAA6B,IAAlB0E,EAAQ/E,MACjB,MAAM,IAAIW,YAAY,gCAExB,OAAOoE,EAAQ/E"}