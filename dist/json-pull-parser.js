!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.JSONPullParser=t():e.JSONPullParser=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t,r){"use strict";function n(e){this.text=e}function o(e){this.s=e,this.f=0,this.l=0|e.length,this.cc=0}function a(e){var t={d:!1,s:e,f:0,l:e.length,e:v,c:0,r:1,x:[]};return{next:function(){if(t.f===t.l)return t.e||t.x.length>0?{done:!1,value:i(t.s,t.l,t.l,"Unexpected end of JSON input")}:{done:!0};var e=l(t);return t.f=e.last,{value:e,done:!1}}}}function i(e,t,r,o,a){a=a||1;for(var i=t,s=e.charCodeAt(i);10!==s&&i>0;)s=e.charCodeAt(--i);10===s&&++i;for(var u="undefined:"+a,c=e.substring(i,t+1),f="",l=i;l<t;++l)f+=" ";f+="^";var p=new SyntaxError(u+"\n"+c+"\n"+f+"\n\n"+o);return{type:n.Error,value:p,first:t,last:r}}function s(e,t,r){return{type:n.StartObject,value:"{",first:t,last:t+1}}function u(e,t,r){return{type:n.EndObject,value:"}",first:t,last:t+1}}function c(e,t,r){return{type:n.StartArray,value:"[",first:t,last:t+1}}function f(e,t,r){return{type:n.EndArray,value:"]",first:t,last:t+1}}function l(e){for(var t=e.s,r=e.f,o=e.l;r<o;)switch(e.c++,t.charCodeAt(r)){case 10:e.c=0,e.r++;case 9:case 13:case 32:++r;continue;case 123:return e.e&v?(e.e=O|k,e.x.push(A),s(t,r,o)):i(t,r,o,"Unexpected token { in JSON at position "+r,e.r);case 125:return e.e&k&&e.x.pop()===A?(e.e=e.x.length>0?g|k:0,u(t,r,o)):i(t,r,o,"Unexpected token } in JSON at position "+r,e.r);case 91:return e.e&v?(e.e=v|k,e.x.push(J),c(t,r,o)):i(t,r,o,"Unexpected token [ in JSON at position "+r,e.r);case 93:return e.e&k&&e.x.pop()===J?(e.e=e.x.length>0?g|k:0,f(t,r,o)):i(t,r,o,"Unexpected token ] in JSON at position "+r,e.r);case 58:if(!(e.e&N))return i(t,r,o,"Unexpected token : in JSON at position "+r,e.r);e.e=v,++r;continue;case 44:if(!(e.e&g))return i(t,r,o,"Unexpected token , in JSON at position "+r,e.r);e.x.length>0&&e.x[e.x.length-1]===A?e.e=O:e.e=v,++r;continue;case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return e.e&v?(e.e=e.x.length>0?g|k:0,p(t,r,o)):i(t,r,o,"Unexpected number in JSON at position "+r,e.r);case 34:return e.e&O?(e.e=N,d(t,r,o)):e.e&v?(e.e=e.x.length>0?g|k:0,d(t,r,o)):i(t,r,o,"Unexpected string in JSON at position "+r,e.r);case 116:return e.e&v?(e.e=e.x.length>0?g|k:0,x(t,r,o)):i(t,r,o,"Unexpected token t in JSON at position "+r,e.r);case 102:return e.e&v?(e.e=e.x.length>0?g|k:0,y(t,r,o)):i(t,r,o,"Unexpected token f in JSON at position "+r,e.r);case 110:return e.e&v?(e.e=e.x.length>0?g|k:0,b(t,r,o)):i(t,r,o,"Unexpected token n in JSON at position "+r,e.r);default:return i(t,r,o,"Unexpected token "+t[r]+" in JSON at position "+r,e.r)}return{type:n.EndDocument,first:o,last:o}}function p(e,t,r){var o=t,a=e.charCodeAt(o++);if(45===a&&(a=e.charCodeAt(o++)),48!==a)for(;a>=48&&a<=57;)a=e.charCodeAt(o++);else a=e.charCodeAt(o++);if(46===a)for(a=e.charCodeAt(o++);a>=48&&a<=57;)a=e.charCodeAt(o++);if(101===a||69===a){if(a=e.charCodeAt(o++),43!==a&&45!==a||(a=e.charCodeAt(o++)),a<48||a>57)return i(e,o-1,r,"Unexpected token "+e[o-1]+" in JSON at position "+(o-1));if(o>=r)return i(e,t,r,"Unexpected end of JSON input");for(;a>=48&&a<=57;)a=e.charCodeAt(o++)}return{type:n.Number,value:parseFloat(e.substring(t,o-1)),first:t,last:o-1}}function d(e,t,r){for(var o=t+1;o<r;){var a=e.charCodeAt(o++);if(34===a)break;if(92===a&&(a=e.charCodeAt(o++),117===a&&(o+=4,o>r)))return i(e,r,r,"Unexpected end of JSON input")}return{type:n.String,value:JSON.parse(e.substring(t,o)),source:e,first:t,last:o}}function h(e,t,r,n,o){if(t+n.length>r)return i(e,r,r,"Unexpected end of JSON input");for(var a=0;a<n.length;++a){var s=e.charCodeAt(t++);if(s!==n[a])return i(e,t,r,"Unexpected token "+e[t-1]+" in JSON at position "+(t-1))}return o}function x(e,t,r){return h(e,t,r,[116,114,117,101],{type:n.TrueLiteral,value:!0,source:e,first:t,last:t+4})}function y(e,t,r){return h(e,t,r,[102,97,108,115,101],{type:n.FalseLiteral,value:!1,source:e,first:t,last:t+5})}function b(e,t,r){return h(e,t,r,[110,117,108,108],{type:n.NullLiteral,value:null,source:e,first:t,last:t+4})}var S=r(1),v=1,O=2,g=4,N=8,k=16,A=32,J=64;n.prototype[Symbol.iterator]=function(){return a(this.text)},n.prototype.tokens=function(){return a(this.text)},"object"==typeof Symbol&&Symbol.iterator&&(n.prototype[Symbol.iterator]=n.prototype.tokens),n.StartDocument="<",n.EndDocument=">",n.StartObject="{",n.EndObject="}",n.StartArray="[",n.EndArray="]",n.String="string",n.Number="number",n.TrueLiteral="true",n.FalseLiteral="false",n.NullLiteral="null",n.Whitespace="ws",n.Error="error",o.prototype.next=function(){return!(this.f>=this.l)&&(this.cc=0|source.charCodeAt(this.f++),!0)},o.prototype.code=function(){return this.cc},o.prototype.expect=function(e){},n.ObjectBuilder=S,n.parse=function(e,t){"string"!=typeof e&&(e=""+e);for(var r=new S,n=a(e),o=n.next();!o.done;o=n.next()){var i=o.value;r.handle(i)}if("undefined"==typeof r.value)throw new SyntaxError("Unexpected end of JSON input");return r.value},e.exports=n},function(e,t){function r(){this.handler={ref:this,add:function(e){return this.ref.value=e,e}}}r.prototype.startObject=function(){this.handler={old:this.handler,key:null,ref:this.handler.add({}),add:function(e){return null===this.key?this.key=e:(this.ref[this.key]=e,this.key=null),e}}},r.prototype.endObject=function(){this.handler=this.handler.old},r.prototype.startArray=function(){this.handler={old:this.handler,ref:this.handler.add([]),add:function(e){return this.ref.push(e),e}}},r.prototype.endArray=r.prototype.endObject,r.prototype.add=function(e){this.handler.add(e)},r.prototype.handle=function(e){switch(e.type){case"{":this.startObject();break;case"}":this.endObject();break;case"[":this.startArray();break;case"]":this.endArray();break;case"string":case"number":case"true":case"false":case"null":this.add(e.value);break;case"error":throw new SyntaxError(e.value.message)}},e.exports=r},function(e,t,r){e.exports=r(0)}])});
//# sourceMappingURL=json-pull-parser.js.map