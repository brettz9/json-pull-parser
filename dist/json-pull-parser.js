!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.JSONPullParser=t():e.JSONPullParser=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var a=r[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t,r){"use strict";function n(e){this.text=e}function a(e){this.s=e,this.f=0,this.l=0|e.length,this.cc=0}function o(e){var t={s:e,f:0,l:e.length,e:O,c:0,r:1,x:[]};return{next:function(){if(t.f===t.l)return{done:!0};var e=d(t);return t.f=e.last,{value:e,done:!1}}}}function i(e,t,r,a,o){o=o||1;for(var i=t,s=e.charCodeAt(i);10!==s&&i>0;)s=e.charCodeAt(--i);10===s&&++i;for(var u="undefined:"+o,c=e.substring(i,t+1),l="",d=i;d<t;++d)l+=" ";l+="^";var f=new SyntaxError(u+"\n"+c+"\n"+l+"\n\n"+a);return{type:n.Error,value:f,first:t,last:r}}function s(e,t,r){return{type:n.StartObject,value:"{",first:t,last:t+1}}function u(e,t,r){return{type:n.EndObject,value:"}",first:t,last:t+1}}function c(e,t,r){return{type:n.StartArray,value:"[",first:t,last:t+1}}function l(e,t,r){return{type:n.EndArray,value:"]",first:t,last:t+1}}function d(e){for(var t=e.s,r=e.f,a=e.l;r<a;)switch(e.c++,t.charCodeAt(r)){case 10:e.c=0,e.r++;case 9:case 13:case 32:++r;continue;case 123:return e.e&O?(e.e=v|J,e.x.push(A),s(t,r,a)):i(t,r,a,"Unexpected token { in JSON at position "+r,e.r);case 125:return e.e&J&&e.x.pop()===A?(e.e=e.x.length>0?N|J:0,u(t,r,a)):i(t,r,a,"Unexpected token } in JSON at position "+r,e.r);case 91:return e.e&O?(e.e=O|J,e.x.push(g),c(t,r,a)):i(t,r,a,"Unexpected token [ in JSON at position "+r,e.r);case 93:return e.e&J&&e.x.pop()===g?(e.e=e.x.length>0?N|J:0,l(t,r,a)):i(t,r,a,"Unexpected token ] in JSON at position "+r,e.r);case 58:if(!(e.e&k))return i(t,r,a,"Unexpected token : in JSON at position "+r,e.r);e.e=O,++r;continue;case 44:if(!(e.e&N))return i(t,r,a,"Unexpected token , in JSON at position "+r,e.r);e.x.length>0&&e.x[e.x.length-1]===A?e.e=v:e.e=O,++r;continue;case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return e.e&O?(e.e=e.x.length>0?N|J:0,f(t,r,a)):i(t,r,a,"Unexpected number in JSON at position "+r,e.r);case 34:return e.e&v?(e.e=k,p(t,r,a)):e.e&O?(e.e=e.x.length>0?N|J:0,p(t,r,a)):i(t,r,a,"Unexpected string in JSON at position "+r,e.r);case 116:return e.e&O?(e.e=e.x.length>0?N|J:0,y(t,r,a)):i(t,r,a,"Unexpected token t in JSON at position "+r,e.r);case 102:return e.e&O?(e.e=e.x.length>0?N|J:0,b(t,r,a)):i(t,r,a,"Unexpected token f in JSON at position "+r,e.r);case 110:return e.e&O?(e.e=e.x.length>0?N|J:0,x(t,r,a)):i(t,r,a,"Unexpected token n in JSON at position "+r,e.r);default:return i(t,r,a,"Unexpected token "+t[r]+" in JSON at position "+r,e.r)}return{type:n.EndDocument,first:a,last:a}}function f(e,t,r){var a=t,o=e.charCodeAt(a++);if(45===o&&(o=e.charCodeAt(a++)),48!==o)for(;o>=48&&o<=57;)o=e.charCodeAt(a++);else o=e.charCodeAt(a++);if(46===o)for(o=e.charCodeAt(a++);o>=48&&o<=57;)o=e.charCodeAt(a++);if(101===o||69===o){if(o=e.charCodeAt(a++),43!==o&&45!==o||(o=e.charCodeAt(a++)),o<48||o>57)return i(e,a-1,r,"Unexpected token "+e[a-1]+" in JSON at position "+(a-1));if(a>=r)return i(e,t,r,"Unexpected end of JSON input");for(;o>=48&&o<=57;)o=e.charCodeAt(a++)}return{type:n.Number,value:parseFloat(e.substring(t,a-1)),first:t,last:a-1}}function p(e,t,r){for(var a=t+1;a<r;){var o=e.charCodeAt(a++);if(34===o)break;if(92===o&&(o=e.charCodeAt(a++),117===o&&(a+=4,a>r)))return i(e,r,r,"Unexpected end of JSON input")}return{type:n.String,value:JSON.parse(e.substring(t,a)),source:e,first:t,last:a}}function h(e,t,r,n,a){if(t+n.length>r)return i(e,r,r,"Unexpected end of JSON input");for(var o=0;o<n.length;++o){var s=e.charCodeAt(t++);if(s!==n[o])return i(e,t,r,"Unexpected token "+e[t-1]+" in JSON at position "+(t-1))}return a}function y(e,t,r){return h(e,t,r,[116,114,117,101],{type:n.TrueLiteral,value:!0,source:e,first:t,last:t+4})}function b(e,t,r){return h(e,t,r,[102,97,108,115,101],{type:n.FalseLiteral,value:!1,source:e,first:t,last:t+5})}function x(e,t,r){return h(e,t,r,[110,117,108,108],{type:n.NullLiteral,value:null,source:e,first:t,last:t+4})}var S=r(1),O=1,v=2,N=4,k=8,J=16,A=32,g=64;n.prototype[Symbol.iterator]=function(){return o(this.text)},n.prototype.tokens=function(){return o(this.text)},"object"==typeof Symbol&&Symbol.iterator&&(n.prototype[Symbol.iterator]=n.prototype.tokens),n.StartDocument="<",n.EndDocument=">",n.StartObject="{",n.EndObject="}",n.StartArray="[",n.EndArray="]",n.String="string",n.Number="number",n.TrueLiteral="true",n.FalseLiteral="false",n.NullLiteral="null",n.Whitespace="ws",n.Error="error",a.prototype.next=function(){return!(this.f>=this.l)&&(this.cc=0|source.charCodeAt(this.f++),!0)},a.prototype.code=function(){return this.cc},a.prototype.expect=function(e){},n.ObjectBuilder=S,n.parse=function(e,t){"string"!=typeof e&&(e=""+e);for(var r=new S,a=o(e),i=a.next();!i.done;i=a.next()){var s=i.value;switch(s.type){case n.BeginDocument:break;case n.EndDocument:break;case n.StartObject:r.startObject();break;case n.EndObject:r.endObject();break;case n.StartArray:r.startArray();break;case n.EndArray:r.endArray();break;case n.String:r.add(s.value);break;case n.Number:r.add(s.value);break;case n.TrueLiteral:r.add(s.value);break;case n.FalseLiteral:r.add(s.value);break;case n.NullLiteral:r.add(s.value);break;case n.Error:throw new SyntaxError(s.value.message)}}if("undefined"==typeof r.value)throw new SyntaxError("Unexpected end of JSON input");return r.value},e.exports=n},function(e,t){function r(){this.handler={ref:this,add:function(e){return this.ref.value=e,e}}}r.prototype.startObject=function(){this.handler={old:this.handler,key:null,ref:this.handler.add({}),add:function(e){return null===this.key?this.key=e:(this.ref[this.key]=e,this.key=null),e}}},r.prototype.endObject=function(){this.handler=this.handler.old},r.prototype.startArray=function(){this.handler={old:this.handler,ref:this.handler.add([]),add:function(e){return this.ref.push(e),e}}},r.prototype.endArray=r.prototype.endObject,r.prototype.add=function(e){this.handler.add(e)},r.prototype.handle=function(e){switch(e.type){case JSONPullParser.StartObject:builder.startObject();break;case JSONPullParser.EndObject:builder.endObject();break;case JSONPullParser.StartArray:builder.startArray();break;case JSONPullParser.EndArray:builder.endArray();break;case JSONPullParser.String:case JSONPullParser.Number:case JSONPullParser.TrueLiteral:case JSONPullParser.FalseLiteral:case JSONPullParser.NullLiteral:builder.add(e.value);break;case JSONPullParser.Error:throw new SyntaxError(e.value.message)}},e.exports=r},function(e,t,r){e.exports=r(0)}])});
//# sourceMappingURL=json-pull-parser.js.map